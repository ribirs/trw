<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <title>부스트 모드 공</title>
  <style>
    body {
      margin: 0;
      overflow: hidden;
      background-color: #f0f0f0;
    }

    #ball {
      position: absolute;
      top: 100px;
      left: 100px;
      width: 50px;
      height: 50px;
      background-color: crimson;
      border-radius: 50%;
    }
  </style>
</head>
<body>
  <div id="ball"></div>

  <script>
    const ball = document.getElementById("ball");
    const ballSize = 50;

    let x = 100;
    let y = 100;

    let vx = 0;
    let vy = 0;

    const baseAcceleration = 0.5;
    const baseMaxSpeed = 10;
    let acceleration = baseAcceleration;
    let maxSpeed = baseMaxSpeed;
    const friction = 0.95;

    let boostMode = false;

    const keys = {
      ArrowUp: false,
      ArrowDown: false,
      ArrowLeft: false,
      ArrowRight: false
    };

    // 방향키 눌림 상태 저장
    document.addEventListener("keydown", (e) => {
      if (e.key in keys) keys[e.key] = true;

      // 스페이스바: 부스트 모드 ON/OFF
      if (e.code === "Space" && !e.repeat) {
        boostMode = !boostMode;

        if (boostMode) {
          acceleration = baseAcceleration * 2;
          maxSpeed = baseMaxSpeed * 2;
          ball.style.backgroundColor = "orange";
        } else {
          acceleration = baseAcceleration;
          maxSpeed = baseMaxSpeed;
          ball.style.backgroundColor = "crimson";
        }
      }
    });

    document.addEventListener("keyup", (e) => {
      if (e.key in keys) keys[e.key] = false;
    });

    // 애니메이션 루프
    function update() {
      const screenWidth = window.innerWidth;
      const screenHeight = window.innerHeight;

      // 가속도 적용
      if (keys.ArrowUp) vy -= acceleration;
      if (keys.ArrowDown) vy += acceleration;
      if (keys.ArrowLeft) vx -= acceleration;
      if (keys.ArrowRight) vx += acceleration;

      // 속도 제한
      vx = Math.max(-maxSpeed, Math.min(maxSpeed, vx));
      vy = Math.max(-maxSpeed, Math.min(maxSpeed, vy));

      // 위치 이동
      x += vx;
      y += vy;

      // 화면 밖 -> 반대편으로 이동
      if (x + ballSize < 0) x = screenWidth;
      else if (x > screenWidth) x = -ballSize;

      if (y + ballSize < 0) y = screenHeight;
      else if (y > screenHeight) y = -ballSize;

      // 관성(감속)
      vx *= friction;
      vy *= friction;

      // 위치 적용
      ball.style.left = x + "px";
      ball.style.top = y + "px";

      requestAnimationFrame(update);
    }

    update(); // 루프 시작
  </script>
</body>
</html>
